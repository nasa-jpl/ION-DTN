<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://nasa-jpl.github.io/ION-DTN/man/dgr/dgr/" />
      <link rel="shortcut icon" href="../../../img/favicon.ico" />
    <title>NAME - ION-DTN Open Source Documentation</title>
    <link rel="stylesheet" href="../../../css/theme.css" />
    <link rel="stylesheet" href="../../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "NAME";
        var mkdocs_page_input_path = "man/dgr/dgr.md";
        var mkdocs_page_url = "/ION-DTN/man/dgr/dgr/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../.." class="icon icon-home"> ION-DTN Open Source Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">ION Overview</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../..">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../ION-Quick-Start-Guide/">Quick Start</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../ION-Deployment-Guide/">ION Deployment Guide</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../ION-Guide/">ION Design & Operation Manual</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../ION-Watch-Characters/">Watch Characters</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../AMS-Programmer-Guide/">AMS Programmer's Guide</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Use-Cases/">Use Cases</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../List-of-Papers/">Publications/Papers</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../community/Contributing-Code-to-ION/">Contribute Code</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Configuration</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Basic-Configuration-File-Tutorial/">Basic Configuration Tutorial</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../ION-Config-File-Templates/">Configuration Templates</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Configure-Multiple-Network-Interfaces/">Multi-network Configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Using-LTP-Config-Tool/">LTP Configuration Tool</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Man Pages</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../ams/">Asychronous Messaging System (AMS)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../bpv6/">Bundle Protocol v6 (BPv6)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../bpv7/">Bundle Protcool v7 (BPv7)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../bss/">Bundle Streaming Service (BSS)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../bssp/">Bundle Streaming Service (Test Utility) Protocol (BSSP)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../cfdp/">CCSDS File Delivery Protocol (CFDP)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../">Datagram Retransmission System (DGR)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../ici/">Interplanetary Communications Infrastructure (ICI)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../ltp/">Licklider Transmission Protocol (LTP)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../nm/">Network Management Agent for Asynchronous Management Protocol (AMP)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../restart/ionrestart/">ION Node Restart Utility</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../tc/">Delay Tolerant Key Administration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Cloud Deployment</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../community/dtn-gcp-main/ION-One-Node-on-Cloud-Linux-VM/">Running 1 ION Node on Cloud VM</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../community/dtn-gcp-2nodes/ION-Two-Node-on-Cloud-Linux-VMs/">Running 2 ION Node on Cloud VM</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../community/dtn-gcp-iot-main/ION-and-IOT-on-Linux-VMs-running-on-Cloud-Computing/">ION and IOT</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../community/dtn-gcp-ltp-tcp-main/ION-LTP-TCP-on-Azure/">LTP and TCP on Azure</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../community/dtn-multicasting-main/Multicasting-over-ION/">Multicast</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../community/dtn-video-intelligence-main/Video-Intelligence/">Video Intelligence</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../..">ION-DTN Open Source Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../.." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">NAME</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="name">NAME</h1>
<p>dgr - Datagram Retransmission system library</p>
<h1 id="synopsis">SYNOPSIS</h1>
<div class="highlight"><pre><span></span><code>#include &quot;dgr.h&quot;

[see description for available functions]
</code></pre></div>
<h1 id="description">DESCRIPTION</h1>
<p>The DGR library is an alternative implementation of a subset of LTP, intended
for use over UDP/IP in the Internet; unlike ION's canonical LTP implementation
it includes a congestion control mechanism that interprets LTP block
transmission failure as an indication of network congestion (not data
corruption) and reduces data transmission rate in response.</p>
<p>As such, DGR differs from many reliable-UDP systems in two main ways:</p>
<div class="highlight"><pre><span></span><code>    It uses adaptive timeout interval computation techniques
    borrowed from TCP to try to avoid introducing congestion
    into the network.

    It borrows the concurrent-session model of transmission
    from LTP (and ultimately from CFDP), rather than waiting
    for one datagram to be acknowledged before sending the next,
    to improve bandwidth utilization.
</code></pre></div>
<p>At this time DGR is interoperable with other implementations of LTP only when
each block it receives is transmitted in a single LTP data segment encapsulated
in a single UDP datagram.  More complex LTP behavior may be implemented in
the future.</p>
<ul>
<li>
<p>int dgr_open(uvast ownEngineId, unsigned int clientSvcId, unsigned short ownPortNbr, unsigned int ownIpAddress, char *memmgrName, Dgr *dgr, DgrRC *rc)</p>
<p>Establishes the application's access to DGR communication service.</p>
<p><em>ownEngineId</em> is the sending LTP engine ID that will characterize segments
issued by this DGR service access point.  In order to prevent erroneous system
behavior, never assign the same LTP engine ID to any two interoperating
DGR SAPs.</p>
<p><em>clientSvcId</em> identifies the LTP client service to which all LTP segments
issued by this DGR service access point will be directed.</p>
<p><em>ownPortNbr</em> is the port number to use for DGR service.  If zero, a
system-assigned UDP port number is used.</p>
<p><em>ownIpAddress</em> is the Internet address of the network interface to use for
DGR service.  If zero, this argument defaults to the address of the interface
identified by the local machine's host name.</p>
<p><em>memmgrName</em> is the name of the memory manager (see memmgr(3)) to use for
dynamic memory management in DGR.  If NULL, defaults to the standard
system malloc() and free() functions.</p>
<p><em>dgr</em> is the location in which to store the service access pointer that must
be supplied on subsequent DGR function invocations.</p>
<p><em>rc</em> is the location in which to store the DGR return code resulting from
the attempt to open this service access point (always DgrOpened).</p>
<p>On any failure, returns -1.  On success, returns zero.</p>
</li>
<li>
<p>void dgr_getsockname(Dgr dgr, unsigned short *portNbr, unsigned int *ipAddress)</p>
<p>States the port number and IP address of the UDP socket used for this DGR
service access point.</p>
</li>
<li>
<p>void dgr_close(Dgr dgr)</p>
<p>Reverses dgr_open(), releasing resources where possible.</p>
</li>
<li>
<p>int dgr_send(Dgr dgr, unsigned short toPortNbr, unsigned int toIpAddress, int notificationFlags, char *content, int length, DgrRC *rc)</p>
<p>Sends the indicated content, of length as indicated, to the remote DGR
service access point identified by <em>toPortNbr</em> and <em>toIpAddress</em>.  The
message will be retransmitted as necessary until either it is acknowledged or
DGR determines that it cannot be delivered.</p>
<p><em>notificationFlags</em>, if non-zero, is the logical OR of the notification
behaviors requested for this datagram.  Available behaviors are DGR_NOTE_FAILED
(a notice of datagram delivery failure will issued if delivery of the
datagram fails) and DGR_NOTE_ACKED (a notice of datagram delivery success
will be issued if delivery of the datagram succeeds).  Notices are issued
via dgr_receive() that is, the thread that calls dgr_receive() on this DGR
service access point will receive these notices interspersed with inbound
datagram contents.</p>
<p><em>length</em> of content must be greater than zero and may be as great
as 65535, but lengths greater than 8192 may not be supported by the local
underlying UDP implementation; to minimize the chance of data loss when
transmitting over the internet, length should not exceed 512.</p>
<p><em>rc</em> is the location in which to store the DGR return code resulting from
the attempt to send the content.</p>
<p>On any failure, returns -1 and sets <em>*rc</em> to DgrFailed.  On success, returns
zero.</p>
</li>
<li>
<p>int dgr_receive(Dgr dgr, unsigned short *fromPortNbr, unsigned int *fromIpAddress, char *content, int *length, int *errnbr, int timeoutSeconds, DgrRC *rc)</p>
<p>Delivers the oldest undelivered DGR event queued for delivery.</p>
<p>DGR events are of two type: (a) messages received from a remote DGR
service access point and (b) notices of previously sent messages that
DGR has determined either have been or cannot be delivered, as requested
in the <em>notificationFlags</em> parameters provided to the dgr_send() calls
that sent those messages.</p>
<p>In the former case, dgr_receive() will place the content of the inbound
message in <em>content</em>, its length in <em>length</em>, and the IP address and port
number of the sender in <em>fromIpAddress</em> and <em>fromPortNbr</em>, and it will
set <em>*rc</em> to DgrDatagramReceived and return zero.</p>
<p>In the latter case, dgr_receive() will place the content of the affected
<strong>outbound</strong> message in <em>content</em> and its length in <em>length</em> and return
zero.  If the event being reported is a delivery success, then
DgrDatagramAcknowledged will be placed in <em>*rc</em>.  Otherwise,
DgrDatagramNotAcknowledged will be placed in <em>*rc</em> and
the relevant errno (if any) will be placed in <em>*errnbr</em>.</p>
<p>The <em>content</em> buffer should be at least 65535 bytes in length to enable
delivery of the content of the received or delivered/undeliverable message.</p>
<p><em>timeoutSeconds</em> controls blocking behavior.  If <em>timeoutSeconds</em>
is DGR_BLOCKING (i.e., -1), dgr_receive() will not return until (a) there
is either an inbound message to deliver or an outbound message delivery
result to report, or (b) the function is interrupted by means of
dgr_interrupt().  If <em>timeoutSeconds</em> is DGR_POLL (i.e., zero),
dgr_receive() returns immediately; if there is currently no
inbound message to deliver and no outbound message
delivery result to report, the function sets <em>*rc</em> to DgrTimedOut and
returns zero.
For any other positive value of <em>timeoutSeconds</em>, dgr_receive() returns
after the indicated number of seconds have lapsed (in which case the
returned value of <em>*rc</em> is DgrTimedOut), or when there is a message to deliver
or a delivery result to report, or when the function is interrupted
by means of dgr_interrupt(), whichever occurs first.  When the function
returns due to interruption by dgr_interrupt(), the value placed in <em>*rc</em> is
DgrInterrupted instead of DgrDatagramReceived.</p>
<p><em>rc</em> is the location in which to store the DGR return code resulting from
the attempt to receive content.</p>
<p>On any I/O error or other unrecoverable system error, returns -1.  Otherwise
always returns zero, placing DgrFailed in <em>*rc</em> and writing a failure message
in the event of an operating error.</p>
</li>
<li>
<p>void dgr_interrupt(Dgr dgr)</p>
<p>Interrupts a dgr_receive() invocation that is currently blocked.  Designed 
to be called from a signal handler; for this purpose, <em>dgr</em> may need to
be obtained from a static variable.</p>
</li>
</ul>
<h1 id="see-also">SEE ALSO</h1>
<p>ltp(3), file2dgr(1), dgr2file(1)</p>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
      <p>Copyright (c) 2002-2011, California Institute of Technology. All rights reserved.</p>
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="../../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../../..";</script>
    <script src="../../../js/theme_extra.js"></script>
    <script src="../../../js/theme.js"></script>
      <script src="../../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
