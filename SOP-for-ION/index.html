
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://nasa-jpl.github.io/ION-DTN/SOP-for-ION/">
      
      
        <link rel="prev" href="../Known-Issues/">
      
      
        <link rel="next" href="../ION-Design-and-API-Overview/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.36">
    
    
      
        <title>Standard Operations Procedure - ION-DTN Open Source Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.06209087.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/css/custom.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="purple">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#standard-operating-procedure-handbook-for-the-interplanetary-overlay-network-ion-bundle-protocol-suite" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="ION-DTN Open Source Documentation" class="md-header__button md-logo" aria-label="ION-DTN Open Source Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ION-DTN Open Source Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Standard Operations Procedure
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="purple"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="lime"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href=".." class="md-tabs__link">
          
  
  ION Overview

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../Basic-Configuration-File-Tutorial/" class="md-tabs__link">
          
  
  Configuration

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../ION-Design-and-API-Overview/" class="md-tabs__link">
          
  
  ION APIs

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../Man-Page-Introduction/" class="md-tabs__link">
          
  
  Man Pages

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../community/dtn-gcp-main/ION-One-Node-on-Cloud-Linux-VM/" class="md-tabs__link">
          
  
  Cloud Deployment

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="ION-DTN Open Source Documentation" class="md-nav__button md-logo" aria-label="ION-DTN Open Source Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    ION-DTN Open Source Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    ION Overview
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            ION Overview
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ION-Quick-Start-Guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quick Start
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ION-Deployment-Guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ION Deployment Guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ION-Guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ION Design & Operation Manual
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ION-Watch-Characters/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Watch Characters
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../AMS-Programmer-Guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AMS Programmer's Guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Use-Cases/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Use Cases
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../List-of-Papers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Publications/Documents
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../community/Contributing-Code-to-ION/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contribute Code
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ION-TestSet-Readme/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ION Test Set
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ION-Tutorials/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ION Tutorials
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Configuration
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Configuration
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Basic-Configuration-File-Tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Basic Configuration Tutorial
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ION-Config-File-Templates/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration Templates
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Configure-Multiple-Network-Interfaces/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Multi-network Configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Using-LTP-Config-Tool/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LTP Configuration Tool
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ION-Launcher/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ION Launcher Script
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Known-Issues/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Known Issues & Patches
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Standard Operations Procedure
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Standard Operations Procedure
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#revision-history" class="md-nav__link">
    <span class="md-ellipsis">
      Revision History
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#contributors" class="md-nav__link">
    <span class="md-ellipsis">
      Contributors
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#table-of-content" class="md-nav__link">
    <span class="md-ellipsis">
      Table of Content
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#document-scope" class="md-nav__link">
    <span class="md-ellipsis">
      Document Scope
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ion-online-documentations-and-source-repositories" class="md-nav__link">
    <span class="md-ellipsis">
      ION Online Documentations and Source Repositories
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basic-use-case-single-user-admin-developer" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Use Case: Single User, Admin &amp; Developer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Basic Use Case: Single User, Admin & Developer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      Dependencies
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pre-installation-check" class="md-nav__link">
    <span class="md-ellipsis">
      Pre-installation Check
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    <span class="md-ellipsis">
      Installation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pre-launch" class="md-nav__link">
    <span class="md-ellipsis">
      Pre-Launch
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#launch-ion" class="md-nav__link">
    <span class="md-ellipsis">
      Launch ION
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#establish-a-shell-session-to-interact-with-an-ion-instance" class="md-nav__link">
    <span class="md-ellipsis">
      Establish a shell session to interact with an ION instance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#real-time-commandingconfiguration" class="md-nav__link">
    <span class="md-ellipsis">
      Real-time Commanding/Configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#shutdown-ion" class="md-nav__link">
    <span class="md-ellipsis">
      Shutdown ION
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#remove-ion-installation" class="md-nav__link">
    <span class="md-ellipsis">
      Remove ION Installation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-for-running-ion-instances" class="md-nav__link">
    <span class="md-ellipsis">
      Check for running ION instance(s)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Check for running ION instance(s)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#method-1-check-ion-daemons" class="md-nav__link">
    <span class="md-ellipsis">
      Method 1: Check ION daemons
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#method-2-check-ipc-status" class="md-nav__link">
    <span class="md-ellipsis">
      Method 2: Check IPC status
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#case-2-multi-user-shared-hostvm" class="md-nav__link">
    <span class="md-ellipsis">
      Case 2: Multi-User, shared host/VM
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendix" class="md-nav__link">
    <span class="md-ellipsis">
      Appendix
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Appendix">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ion-shared-memory-key" class="md-nav__link">
    <span class="md-ellipsis">
      ION Shared Memory KEY
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ION Shared Memory KEY">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#shared-memory-segments" class="md-nav__link">
    <span class="md-ellipsis">
      Shared Memory Segments
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#svr4-semaphores" class="md-nav__link">
    <span class="md-ellipsis">
      SVR4 Semaphores
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#posix-named-semaphores" class="md-nav__link">
    <span class="md-ellipsis">
      POSIX Named Semaphores
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ion-related-daemons" class="md-nav__link">
    <span class="md-ellipsis">
      ION-related Daemons
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#notes" class="md-nav__link">
    <span class="md-ellipsis">
      Notes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    ION APIs
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            ION APIs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ION-Design-and-API-Overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ION Design & API Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ICI-API/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ION Infrastructure API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ION-Application-Service-Interface/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ION Application Service Interface
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../BP-Service-API/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    BP Service API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LTP-UComm-API/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LTP Underlying Communications API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../CLA-API/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CLA API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Extension-Block-Interface/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Extension Block Interface
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Platform-Macros-Error-Reporting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Platform Macros & Error Reporting
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ION-Utilities/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ION Utility Programs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ION-Coding-Guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ION Coding Guide
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Man Pages
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Man Pages
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Man-Page-Introduction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Man Pages
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../man/ams/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Asychronous Messaging System (AMS)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../man/bpv7/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bundle Protcool v7 (BPv7)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../man/bpv6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bundle Protocol v6 (BPv6)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../man/bss/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bundle Streaming Service (BSS)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../man/bssp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bundle Streaming Service (Test Utility) Protocol (BSSP)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../man/cfdp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CCSDS File Delivery Protocol (CFDP)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../man/dgr/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Datagram Retransmission System (DGR)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../man/dtpc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Delay Tolerant Payload Conditioning (DTPC)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../man/ici/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Interplanetary Communications Infrastructure (ICI)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../man/ltp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Licklider Transmission Protocol (LTP)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../man/nm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Network Management Agent for Asynchronous Management Protocol (AMP)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../man/restart/ionrestart/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ION Node Restart Utility
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../man/tc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Delay Tolerant Key Administration
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Cloud Deployment
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Cloud Deployment
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../community/dtn-gcp-main/ION-One-Node-on-Cloud-Linux-VM/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Running 1 ION Node on Cloud VM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../community/dtn-gcp-2nodes/ION-Two-Node-on-Cloud-Linux-VMs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Running 2 ION Node on Cloud VM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../community/dtn-gcp-iot-main/ION-and-IOT-on-Linux-VMs-running-on-Cloud-Computing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ION and IOT
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../community/dtn-gcp-ltp-tcp-main/ION-LTP-TCP-on-Azure/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LTP and TCP on Azure
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../community/dtn-multicasting-main/Multicasting-over-ION/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Multicast
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../community/dtn-video-intelligence-main/Video-Intelligence/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Video Intelligence
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="standard-operating-procedure-handbook-for-the-interplanetary-overlay-network-ion-bundle-protocol-suite">Standard Operating Procedure Handbook for the Interplanetary Overlay Network (ION) Bundle Protocol Suite</h1>
<p>Date: 2024-06-26</p>
<p>Version: 0</p>
<h2 id="revision-history">Revision History</h2>
<table>
<thead>
<tr>
<th>Version</th>
<th>Date</th>
<th>Applicable ION Version</th>
<th>Change Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>6/26/2024</td>
<td>4.1.3</td>
<td>Initial draft</td>
</tr>
</tbody>
</table>
<h2 id="contributors">Contributors</h2>
<ul>
<li>Sky DeBaun (JPL/Caltech)</li>
<li>Jay Gao (JPL/Caltech)</li>
<li>Patricia Lindner (Ohio University)</li>
<li>Shawn Osterman (Ohio University)</li>
<li>Nate Richards (JPL/Caltech)</li>
<li>Leigh Torgerson (JPL/Caltech)</li>
</ul>
<h2 id="table-of-content">Table of Content</h2>
<ul>
<li><a href="#standard-operating-procedure-handbook-for-the-interplanetary-overlay-network-ion-bundle-protocol-suite">Standard Operating Procedure Handbook for the Interplanetary Overlay Network (ION) Bundle Protocol Suite</a></li>
<li><a href="#revision-history">Revision History</a></li>
<li><a href="#contributors">Contributors</a></li>
<li><a href="#table-of-content">Table of Content</a></li>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#document-scope">Document Scope</a></li>
<li><a href="#ion-online-documentations-and-source-repositories">ION Online Documentations and Source Repositories</a></li>
<li><a href="#basic-use-case-single-user-admin--developer">Basic Use Case: Single User, Admin \&amp; Developer</a><ul>
<li><a href="#dependencies-1">Dependencies [^1]</a></li>
<li><a href="#pre-installation-check">Pre-installation Check</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#pre-launch">Pre-Launch</a></li>
<li><a href="#launch-ion">Launch ION</a></li>
<li><a href="#establish-a-shell-session-to-interact-with-an-ion-instance">Establish a shell session to interact with an ION instance</a></li>
<li><a href="#real-time-commandingconfiguration">Real-time Commanding/Configuration</a></li>
<li><a href="#shutdown-ion">Shutdown ION</a></li>
<li><a href="#remove-ion-installation">Remove ION Installation</a></li>
<li><a href="#check-for-running-ion-instances">Check for running ION instance(s)</a></li>
<li><a href="#method-1-check-ion-daemons">Method 1: Check ION daemons</a></li>
<li><a href="#method-2-check-ipc-status">Method 2: Check IPC status</a></li>
<li><a href="#case-2-multi-user-shared-hostvm">Case 2: Multi-User, shared host/VM</a></li>
</ul>
</li>
<li><a href="#appendix">Appendix</a><ul>
<li><a href="#ion-shared-memory-key">ION Shared Memory KEY</a></li>
<li><a href="#shared-memory-segments">Shared Memory Segments</a></li>
<li><a href="#svr4-semaphores">SVR4 Semaphores</a></li>
<li><a href="#posix-named-semaphores">POSIX Named Semaphores</a></li>
<li><a href="#ion-related-daemons">ION-related Daemons</a></li>
<li><a href="#notes">Notes</a></li>
</ul>
</li>
</ul>
<h2 id="introduction">Introduction</h2>
<p>In this document, we provide a detailed SOP on how to deploy ION for
system administrators, software developers/testers, and ION network
operators.</p>
<h2 id="document-scope">Document Scope</h2>
<p>The initial draft of this document will focus on <code>Linux</code>, <code>Solaris</code>, and
<code>MacOS</code> using the ION open-source codebase released through Github.</p>
<p>We will address single-user and multi-user cases.</p>
<p>Future versions of this document will expand the SOP to include the ION
Core package.</p>
<p>During versions of this document, we intend to address specific
considerations for adopting the SOP to other platforms/OS such as:</p>
<ul>
<li>Windows Operating System</li>
<li>Cloud Computing</li>
<li>Embedded System</li>
</ul>
<h2 id="ion-online-documentations-and-source-repositories">ION Online Documentations and Source Repositories</h2>
<ul>
<li>ION Open Source Online Documentation:
  <a href="https://nasa-jpl.github.io/ION-DTN/">https://nasa-jpl.github.io/ION-DTN/</a></li>
<li>ION Open Source Git Repository:
  <a href="https://github.com/nasa-jpl/ION-DTN">https://github.com/nasa-jpl/ION-DTN</a></li>
<li>ION Core:
  <a href="https://github.com/nasa-jpl/ion-core">https://github.com/nasa-jpl/ion-core</a></li>
</ul>
<h2 id="basic-use-case-single-user-admin-developer">Basic Use Case: Single User, Admin &amp; Developer</h2>
<p>We start with the simplest configuration where a single user has full control over a host or a VM within a secured envrionment within which ION will execute. The host and VM have no other purpose other than the development and testing of ION. </p>
<h3 id="dependencies">Dependencies <sup id="fnref:1"><a class="footnote-ref" href="#fn:1">1</a></sup></h3>
<ul>
<li><code>gcc</code></li>
<li><code>make</code></li>
<li><code>automake</code></li>
<li><code>autoconf</code></li>
<li><code>libtool</code></li>
<li><code>bash</code> - (optional) Many scripts are written for bash shell; having bash installed in the system will ensure these scripts execute predictably.</li>
<li><code>python3</code> - (optional) Python is used for some BPSec regression tests but is not strictly required to build and run ION.</li>
<li><code>sudo</code> - (optional) While sudo privilege is required during the last step of a nominal installation on Linux to execute the shared library update. However, it is not strictly required to use ION if it is installed in a directory owned by the user with a properly updated library and execution paths.</li>
<li><code>net-tools</code> - (optional) useful for checking network connectivity and performance for ION troubleshooting.</li>
</ul>
<h3 id="pre-installation-check">Pre-installation Check</h3>
<p>If the user plans to install only one version of ION, then the user should:</p>
<ol>
<li><a href="#check-for-running-ion-instances">Check for running ION instances</a> and <a href="#shutdown-ion-1">shutdown ION</a>.</li>
<li><a href="#check-for-ion-installation">Check for an existing installation of ION</a> and <a href="#remove-ion-installation">remove ION</a>.</li>
</ol>
<p>If the user plans to install multiple versions of ION in different directories, then the user should:</p>
<ol>
<li><a href="#check-for-ion-installation">Determine the location of any existing installation of ION</a>.</li>
<li>Select a different prefix (directory) for the installation.</li>
</ol>
<h3 id="installation">Installation</h3>
<ol>
<li>
<p><strong>Download the ION release from GitHub and verify the checksum of the tarfile</strong>.</p>
</li>
<li>
<p><strong>Extract ION into the source directory of your choice</strong>.</p>
</li>
<li>
<p><strong>In a shell environment, change to ION source code's root directory</strong>:</p>
<ul>
<li>Verify the ION version by checking the content of the <code>release_notes.txt</code> file in ION's root directory. The release version will be stated in the first line of the file.</li>
<li>Check for the presence of the <code>configure</code> script in the ION root directory - if not present, run <code>autoreconf -fi</code> to generate the <code>configure</code> script.</li>
<li>Check the execution path in your system, e.g., <code>echo $PATH</code> and make a note whether <code>/usr/local/bin</code> or your intended installation directory is part of it.</li>
</ul>
</li>
<li>
<p><strong>Run <code>./configure</code> to build the Makefile</strong>:</p>
<ul>
<li>If the Makefile already reflects the configuration you wanted, say from a previous <code>./configure</code> run, you don't need to do it again. Skip to the next step.</li>
<li>Run <code>./configure --help</code> to see a list of options.</li>
<li>For Solaris OS, it is recommended to add the argument <code>MAKE=gmake</code>.</li>
<li>If you want to install bundle protocol version 6 (BPv6) instead of the most current BPv7 implementation, then include the <code>--enable-bpv6</code> option.</li>
<li>Check the execution path to make sure where you intend to install ION is in the <code>PATH</code> variable or will be added later.</li>
<li>To install ION to a directory other than the default of <code>/usr/local</code>, use the <code>--prefix</code> option.</li>
</ul>
</li>
<li>
<p><strong>Build ION</strong>:</p>
<ul>
<li>Run <code>make</code> to build ION.<ul>
<li>If you know ION was built before, either under a different set of configuration options, or just want to ensure everything is rebuilt correctly, run <code>make clean</code> first.</li>
<li>If using Solaris, you could use <code>gmake</code> instead.</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Install ION</strong>:</p>
<ul>
<li>Run <code>sudo make install</code> or <code>make install</code> to install ION. Whether <code>sudo</code> is needed will depend on the permissions required to write to the installation directory. Using the default installation location of <code>/usr/local</code> requires sudo privilege.<ul>
<li>If you noticed prior installations of ION were not removed, run <code>sudo make uninstall</code> or <code>make uninstall</code> (depending on where you are installing the executables and the libraries). This assumes that the prior installation is using essentially the same ION version and the same installation directory. If the situation is more complicated, you should try the <a href="#remove-ion-installation">remove ION installation</a> procedure.</li>
<li>If using Solaris, you could use <code>gmake</code> instead.</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Run <code>sudo ldconfig</code></strong>:</p>
<ul>
<li>At the end of the installation, you may need to run this command to update the shared library management in the operating system.<ul>
<li>For Solaris and MacOS, <code>ldconfig</code> is not required.</li>
<li>If you install ION in a directory owned by the user, <code>ldconfig</code> is not useful because it manages only system-wide shared libraries. In that case, you need to update the shared library separately in the shell environment in which you plan to execute ION:</li>
</ul>
</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nb">export</span><span class="w"> </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span>/path/to/your/libs:<span class="nv">$LD_LIBRARY_PATH</span>
</code></pre></div>
</li>
<li>
<p><strong>(Optional) Run tests</strong>:</p>
<ul>
<li>Run <code>make test</code> to execute the C code-based regression tests in ION.<ul>
<li>Verify that the <code>bping</code> test at the end passed.</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Verify ION installation location</strong>:</p>
<ul>
<li>Run <code>which bpversion</code>; the path shown should be either <code>/usr/local/bin</code> or the bin directory under the prefix you specified.</li>
<li>Verify installed Bundle Protocol version by running <code>bpversion</code>.</li>
<li>Verify ION version by running <code>ionadmin</code>, then followed by the <code>v</code> command at the prompt. Type <code>q</code> to quit.</li>
<li>Verify ION operation by running the basic <code>bping</code> test. You can skip this if you ran <code>make test</code> earlier, which would automatically trigger the <code>bping</code> test.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nb">cd</span><span class="w"> </span>tests
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>./runtests<span class="w"> </span>bping
</code></pre></div>
</li>
</ol>
<h3 id="pre-launch">Pre-Launch</h3>
<ol>
<li><strong>Check for running instances of ION</strong> by following these <a href="#check-for-running-ion-instances">steps</a>.</li>
<li>If you find ION instances running in the system that are not part of a multi-ION configuration you are participating in, or if you intend to launch a single-instance ION configuration in this host, follow the <a href="#shutdown-ion">Shutdown</a> procedure to stop all ION instances in the system.</li>
<li><strong>Load ION configuration files</strong> into the predetermined working directory and <code>cd</code> into that directory.</li>
<li><strong>Verify all required <code>.rc</code> files and the contact graph file (if used) are present in the working directory</strong>.</li>
<li><strong>Remove files created by previous ION runs &amp; remove them as necessary</strong>:<ul>
<li><code>ion.log</code> in the current directory.</li>
<li>BSS database files: <code>*.lst</code>, <code>*.dat</code>, and <code>*.tbl</code>.</li>
<li>Check for temporary files left over from previous failed BP and LTP acquisition processes, typically found in the working directory: <code>bpacq.&lt;integer&gt;</code> and <code>ltpacq.&lt;integer&gt;</code>.</li>
<li>Check for leftover <code>ion.sdrlog</code> file, typically found in <code>/tmp</code>. However, it may be located in another directory if a different <code>pathName</code> was specified by the previous run's <code>ionconfig</code> file. See the man page entry for <code>ionconfig</code> for details.</li>
<li>If you know the installed ION will utilize the POSIX Named Semaphore (this is default as of ION 4.1.3), check for any POSIX named semaphore files left in the folder (for Ubuntu) <code>/dev/shm</code>. Identify the ION-related semaphores named with this pattern: <code>sem.ion:GLOBAL:&lt;integer&gt;</code>. If these files are owned by another user, they should be removed so you can launch a new instance of ION.<ul>
<li>Typically, with a nominal ION shutdown, these semaphore files are removed automatically. However, due to system crashes or other ungraceful shutdowns, i.e., utilizing <code>kill -9</code> or ION's kill script alone, they will be left behind.</li>
<li>The location of the semaphore files can change for different distributions. Always verify the directory you are looking at is the correct location.</li>
<li>For MacOS, the POSIX-named semaphores are not accessible through the file system, so this step can be skipped.</li>
</ul>
</li>
<li>TBD.....Check network connection, firewall setting, run tcp/udp or both with the peer's IP address and port. Update firewall settings as necessary.</li>
</ul>
</li>
</ol>
<h3 id="launch-ion">Launch ION</h3>
<ul>
<li>TBD</li>
</ul>
<h3 id="establish-a-shell-session-to-interact-with-an-ion-instance">Establish a shell session to interact with an ION instance</h3>
<ol>
<li><strong>Start a shell session as needed</strong>.</li>
<li><strong>Check &amp; set environment variables</strong>:<ul>
<li>If you are interacting with one of multiple ION instances that are running simultaneously on this host, you need to set the following environment variables:<ul>
<li><code>export ION_NODE_LIST_DIR=$PWD</code></li>
<li><code>export ION_NODE_WDNAME=&lt;path to the ION WD&gt;</code> this is needed if you are not currently in the working directory of the ION instance with which you plan to interact.</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Confirm you are now interacting with the correct ION instance by running</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>bpadmin
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>l<span class="w"> </span>induct
</code></pre></div>
<p>The output will show the configured induct, which will provide you an indirect confirmation of which ION node you are interacting with.</p>
</li>
</ol>
<h3 id="real-time-commandingconfiguration">Real-time Commanding/Configuration</h3>
<ol>
<li><strong>First establish a shell session with the ION instance using these <a href="#establish-a-shell-session-to-interact-with-an-ion-instance">steps</a></strong>.</li>
<li>TBD...</li>
<li>TBD...</li>
</ol>
<h3 id="shutdown-ion">Shutdown ION</h3>
<ol>
<li><strong>Determine if you are in a multi-ION instance configuration</strong>. First, establish a shell session with the ION instance you want to shut down using these <a href="#establish-a-shell-session-to-interact-with-an-ion-instance">steps</a>.</li>
<li>
<p><strong>Launch the shutdown script</strong>:</p>
<ul>
<li>If you know the working directory and a shutdown script is provided, then execute that script.</li>
<li>If you don't know the working directory but ION appears to be running normally, try to shut it down by executing the admin program associated with the ION daemons. For example, you could run the following commands:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>bpadmin<span class="w"> </span>.
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>ltpadmin<span class="w"> </span>.
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>ionadmin<span class="w"> </span>.
</code></pre></div>
<p>Additional admin programs will need to run to try to shut down the associated services. To determine exactly which services are running, you need to look at the output of the <code>ps</code> command to figure that out.</p>
</li>
<li>
<p><strong>Use the <a href="#check-for-running-ion-instances">check ION instance</a> procedure</strong>. If the instance you are trying to shut down is still running, then use the installed <code>ionstop</code> stop script from the working directory of the ION instance you want to shut down.</p>
</li>
<li><strong>Re-verify ION is no longer running using the <a href="#check-for-running-ion-instances">check ION instance</a> procedure</strong>.</li>
</ol>
<h3 id="remove-ion-installation">Remove ION Installation</h3>
<ol>
<li>
<p><strong>Determine if you know the source directory of the existing installation</strong>:</p>
<ul>
<li>If you know this, <code>cd</code> to that directory and proceed to next step.</li>
<li>If you don't know, use <code>bpversion</code> and <code>ionadmin</code> to get the bundle protocol version and ION release number. This may help you identify the probable ION source on the host. If you can identify the source code directory used to build the existing ION <code>cd</code> to that directory.</li>
<li>If you can't find the source code or nothing matches the bundle protocol version and ION release:<ul>
<li>Use <code>which ionadmin</code> to determine the installation location.</li>
<li>Delete all ION-related daemons (from bin) and libraries (from lib) manually. Remember, other programs and libraries may also be installed under the same prefix. <strong>Be careful.</strong></li>
<li>Execute <code>sudo ldconfig</code> to update the shared library cache or update the LD library path. This completes the removal.</li>
<li>Verify by trying to run <code>ionadmin</code>.</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>From the installation source directory</strong>:</p>
<ul>
<li>Run <code>sudo make uninstall</code> or <code>make uninstall</code>. This should remove all ION build artifacts from the system, including all the binaries and libraries installed in the system.<ul>
<li>You can also run <code>make clean</code> to clear the artifacts of the compilation process from the source directory. However, the <code>Makefile</code> still retains the options you set via the <code>./configure</code> command. If you want to build with different options, you need to run <code>./configure</code> with the new compile options.</li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 id="check-for-running-ion-instances">Check for running ION instance(s)</h3>
<p>There are multiple ways to check whether one or more ION instances are running.</p>
<h4 id="method-1-check-ion-daemons">Method 1: Check ION daemons</h4>
<ol>
<li>Run <code>ps -fe</code> and look for various ION-related daemons. Here is a <a href="#ion-related-daemons">list</a>.</li>
</ol>
<h4 id="method-2-check-ipc-status">Method 2: Check IPC status</h4>
<ol>
<li>Run <code>ipcs</code> to make sure there are no ION-related shared memory:<ul>
<li>Shared memory area identified by the KEY used to create them.</li>
<li>ION-related shared memory KEY may not be the default value; this requires some prior knowledge.</li>
<li>If ION was launched using the default keys, you should see the typical set of default KEY listed <a href="#ion-shared-memory-key">here</a>.</li>
</ul>
</li>
</ol>
<h3 id="case-2-multi-user-shared-hostvm">Case 2: Multi-User, shared host/VM</h3>
<p>TBD</p>
<h2 id="appendix">Appendix</h2>
<h3 id="ion-shared-memory-key">ION Shared Memory KEY</h3>
<p>ION uses shared memory for storing and passing data between ION service
daemons. When ION is launched, several shared memory segments are
created according to the <code>.ionconfig</code> file. If no specific key values are
provided by the user, ION will launch using the following default values
as seen when executing the <code>ipcs</code> command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>------ Shared Memory Segments --------
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>key         shmid   owner   perms   bytes       nattch      status
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>0x0000ee02  0       root    666     641024      8
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>0x0000ff00  1       root    666     1000000     8
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>0x14770006  2       root    666     4002544     8
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>0x0000ff01  3       root    666     50000000    8
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a>------ Semaphore Arrays --------
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a>
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a>key         semid   owner   perms   nsems
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a>0x0000ee01  0       root    666     1
<a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a>0x14770001  1       root    666     250
</code></pre></div>
<h4 id="shared-memory-segments">Shared Memory Segments</h4>
<ul>
<li>shmid 0 (0xee02 = 60930) is SM_SEMBASEKEY, this is the shared memory used to track the set of semaphores created and used by ION and its daemons.</li>
<li>shmid 1 (0xff00 = 65280) is the SDR working memory <code>sdrwm</code>.</li>
<li>shmid 2 (0x14770006) is the SDR heap space 500000 * 8 bytes = 4000000 (the extra space is for the SDR catalog at the beginning), and created by process ID hex 1477 (dec 5239).</li>
<li>shmid 3 (0xff01 = 65281) is the shared memory space allocated to the ION working memory <code>ionwm</code>.</li>
</ul>
<h4 id="svr4-semaphores">SVR4 Semaphores</h4>
<ul>
<li>semid 0 (0xee01 = 60929) is SM_SEMKEY, the initial semaphore set called <code>ipcSemaphore</code> that is used to boostrap ION.</li>
<li>semid 1 (0x14770001) is a set of 250 additional semaphores created by process ID hex 1477 (dec 5239). Key is generated by the function <code>getUniqueKey()</code> whereby 1477 is the process ID with addition of a randomized value in the lower 16 bits.</li>
</ul>
<p>NOTE: you may notice one or multiple shared memory blocks of size 20,000,000 bytes. These are <code>sptrace</code> working memory created by either the <code>sdrwatch</code> or the <code>psmwatch</code> programs.</p>
<h4 id="posix-named-semaphores">POSIX Named Semaphores</h4>
<p>When ION is running or was improperly shut down due to a crash or <code>kill -9</code> command, the POSIX named semaphore files will remain in the file system. For Ubuntu, the location of these files is <code>/dev/shm</code>; for other Linux distributions, the locations can vary. The semaphore files created by ION adopts the following name pattern: </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>sem.ion:GLOBAL:\&lt;integer\&gt;
</code></pre></div>
<p>Most operating system restrict semaphore files in such ways that only the owner can remove them, so it is important to make sure that ION is properly shutdown or that these semaphore files are removed after a crash or before launching a new instance of ION.</p>
<h3 id="ion-related-daemons">ION-related Daemons</h3>
<p>In the <code>kilim</code> script provided by ION, there is a list of all ION-related daemons. While ION is running, the set of daemons running depends on the user's configuration and DTN services activated. The presence of any of these daemons could indicate either a nominal state of operation or an imcomplete shutdown, leaving some processes to run in the background.</p>
<p>To determine which state ION is in, you should check the ion.log. If you know the working directory of the ION instance. Any anomaly will likely be reported to the ion.log.</p>
<p>Another indication of anomaly is by examine whether a critical set of daemons are present - for example, <code>rfxclock</code>, <code>bpclock</code>, <code>bptransit</code>, <code>bpclm</code>, <code>ipnfw</code>, <code>ipnadminep</code> are some of the most critical daemons what should be running even for a barebone ION configuration. If any of them are missing while other ION daemons remains in the system, it should indicate an anomaly.</p>
<p>Here is a list of all possible ION daemons:</p>
<ul>
<li>acsadmin lt-acsadmin \</li>
<li>acslist lt-acslist \</li>
<li>aoslsi lt-aoslsi \</li>
<li>aoslso lt-aoslso \</li>
<li>bibeadmin lt-bibeadmin \</li>
<li>bibeclo lt-bibeclo \</li>
<li>bpadmin lt-bpadmin \</li>
<li>bpcancel lt-bpcancel \</li>
<li>bpchat lt-bpchat \</li>
<li>bpclm lt-bpclm \</li>
<li>bpclock lt-bpclock \</li>
<li>bpcounter lt-bpcounter \</li>
<li>bpdriver lt-bpdriver \</li>
<li>bpecho lt-bpecho \</li>
<li>bping lt-bping \</li>
<li>bplist lt-bplist \</li>
<li>bpnmtest lt-bpnmtest \</li>
<li>bprecvfile lt-bprecvfile \</li>
<li>bpsecadmin lt-bpsecadmin \</li>
<li>bpsendfile lt-bpsendfile \</li>
<li>bpsink lt-bpsink \</li>
<li>bpsource lt-bpsource \</li>
<li>bpstats lt-bpstats \</li>
<li>bpstats2 lt-bpstats2 \</li>
<li>bptrace lt-bptrace \</li>
<li>bptransit lt-bptransit \</li>
<li>brsccla lt-brsccla \</li>
<li>brsscla lt-brsscla \</li>
<li>bsscounter lt-bsscounter \</li>
<li>bssdriver lt-bssdriver \</li>
<li>bsspadmin lt-bsspadmin \</li>
<li>bsspcli lt-bsspcli \</li>
<li>bsspclo lt-bsspclo \</li>
<li>bsspclock lt-bsspclock \</li>
<li>bssrecv lt-bssrecv \</li>
<li>bssStreamingApp lt-bssStreamingApp \</li>
<li>cgrfetch lt-cgrfetch \</li>
<li>cpsd lt-cpsd \</li>
<li>dccpcli lt-dccpcli \</li>
<li>dccpclo lt-dccpclo </li>
<li>dccplso lt-dccplso \</li>
<li>dgr2file lt-dgr2file \</li>
<li>dgrcli lt-dgrcli \</li>
<li>dgrclo lt-dgrclo \</li>
<li>dtka lt-dtka \</li>
<li>dtkaadmin lt-dtkaadmin \</li>
<li>dtn2admin lt-dtn2admin \</li>
<li>dtn2adminep lt-dtn2adminep \</li>
<li>dtn2fw lt-dtn2fw \</li>
<li>dtpcadmin lt-dtpcadmin \</li>
<li>dtpcclock lt-dtpcclock \</li>
<li>dtpcd lt-dtpcd \</li>
<li>dtpcreceive lt-dtpcreceive \</li>
<li>dtpcsend lt-dtpcsend \</li>
<li>file2dgr lt-file2dgr \</li>
<li>file2sdr lt-file2sdr \</li>
<li>file2sm lt-file2sm \</li>
<li>file2tcp lt-file2tcp \</li>
<li>file2udp lt-file2udp \</li>
<li>hmackeys lt-hmackeys \</li>
<li>imcadmin lt-imcadmin \</li>
<li>imcadminep lt-imcadminep \</li>
<li>imcfw lt-imcfw \</li>
<li>ionadmin lt-ionadmin \</li>
<li>ionexit lt-ionexit \</li>
<li>ionrestart lt-ionrestart \</li>
<li>ionsecadmin lt-ionsecadmin \</li>
<li>ionunlock lt-ionunlock \</li>
<li>ionwarn lt-ionwarn \</li>
<li>ipnadmin lt-ipnadmin \</li>
<li>ipnadminep lt-ipnadminep \</li>
<li>ipnd lt-ipnd \</li>
<li>ipnfw lt-ipnfw \</li>
<li>lgagent lt-lgagent \</li>
<li>lgsend lt-lgsend \</li>
<li>ltpadmin lt-ltpadmin \</li>
<li>ltpcli lt-ltpcli \</li>
<li>ltpclo lt-ltpclo \</li>
<li>ltpclock lt-ltpclock \</li>
<li>ltpcounter lt-ltpcounter \</li>
<li>ltpdeliv lt-ltpdeliv \</li>
<li>ltpdriver lt-ltpdriver \</li>
<li>ltpmeter lt-ltpmeter \</li>
<li>ltpsecadmin lt-ltpsecadmin \</li>
<li>nm_agent lt-nm_agent \</li>
<li>nm_mgr lt-nm_mgr \</li>
<li>owltsim lt-owltsim \</li>
<li>owlttb lt-owlttb \</li>
<li>psmshell lt-psmshell \</li>
<li>psmwatch lt-psmwatch \</li>
<li>ramsgate lt-ramsgate \</li>
<li>recvfile lt-recvfile \</li>
<li>rfxclock lt-rfxclock \</li>
<li>sdatest lt-sdatest \</li>
<li>sdr2file lt-sdr2file \</li>
<li>sdrmend lt-sdrmend \</li>
<li>sdrwatch lt-sdrwatch \</li>
<li>sendfile lt-sendfile \</li>
<li>sm2file lt-sm2file \</li>
<li>smlistsh lt-smlistsh \</li>
<li>smrbtsh lt-smrbtsh \</li>
<li>stcpcli lt-stcpcli \</li>
<li>stcpclo lt-stcpclo \</li>
<li>tcaadmin lt-tcaadmin\</li>
<li>tcaboot lt-tcaboot\</li>
<li>tcacompile lt-tcacompile\</li>
<li>tcapublish lt-tcapublish\</li>
<li>tcarecv lt-tcarecv\</li>
<li>tcc lt-tcc\</li>
<li>tccadmin lt-tccadmin \</li>
<li>tcp2file lt-tcp2file \</li>
<li>tcpbsi lt-tcpbsi \</li>
<li>tcpbso lt-tcpbso \</li>
<li>tcpcli lt-tcpcli \</li>
<li>tcpclo lt-tcpclo \</li>
<li>udp2file lt-udp2file \</li>
<li>udpbsi lt-udpbsi \</li>
<li>udpbso lt-udpbso \</li>
<li>udpcli lt-udpcli \</li>
<li>udpclo lt-udpclo \</li>
<li>udplsi lt-udplsi \</li>
<li>udplso lt-udplso \</li>
<li>amsbenchr lt-amsbenchr \</li>
<li>amsbenchs lt-amsbenchs \</li>
<li>amsd lt-amsd \</li>
<li>amshello lt-amshello \</li>
<li>amslog lt-amslog \</li>
<li>amslogprt lt-amslogprt \</li>
<li>amsshell lt-amsshell \</li>
<li>amsstop lt-amsstop \</li>
<li>bputa lt-bputa \</li>
<li>cfdpadmin lt-cfdpadmin \</li>
<li>cfdpclock lt-cfdpclock \</li>
<li>cfdptest lt-cfdptest \</li>
<li>bpcp lt-bpcp\</li>
<li>bpcpd lt-bpcpd\</li>
</ul>
<h3 id="notes">Notes</h3>
<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p>In this document, we refer to software packages by name given for
   the Ubuntu distribution. Equivalent packages for other Linux
   distributions/OS could be different.&#160;<a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn:2">
<p>At this time, ION's admin program does not provide a command to
   identify its own "node ID." Short of that, the best way to check for
   the identity of a running ION node is to either look at the current
   ion.log for output generated during launch, or by asking bpadmin to
   report its induct information.&#160;<a class="footnote-backref" href="#fnref:2" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
<li id="fn:3">
<p>It is assumed that you know the working directory associated with
   the running ION instance you want to interact with.&#160;<a class="footnote-backref" href="#fnref:3" title="Jump back to footnote 3 in the text">&#8617;</a></p>
</li>
<li id="fn:4">
<p>It is assumed that you know the working directory associated with
   the running ION instance you want to shutdown.&#160;<a class="footnote-backref" href="#fnref:4" title="Jump back to footnote 4 in the text">&#8617;</a></p>
</li>
</ol>
</div>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright (c) 2002-2011, California Institute of Technology. All rights reserved.
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs", "navigation.sections", "toc.integrate", "navigation.top", "search.suggest", "search.highlight", "content.tabs.link", "content.code.annotation", "content.code.copy"], "search": "../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.56dfad97.min.js"></script>
      
    
  </body>
</html>